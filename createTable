 create table Cliente(
 	NIF		integer		not null,
 	nome 	varchar(30) not null,
 	morada	varchar(30) not null,
 	telefone integer 	not null,
 	tipo 	varchar(1)	not null,
 	ativo	bit			not null,
 	referencia	integer,
 	primary key (NIF),
 	constraint wrong_tipo check(tipo like 'I' or tipo like 'P'),
 	constraint not_self check (referencia <> NIF)
);

create table Particulares(
 	NIF		integer		not null,
 	CC		integer		not null,
 	primary key(NIF),
 	foreign key (NIF) references CLiente (NIF)
);

ALTER TABLE Cliente ADD FOREIGN KEY (referencia) REFERENCES Particulares(NIF) on delete cascade on update cascade;
 
 create table Institucionais(
 	NIF				integer		not null,
 	Nome_contacto	varchar(30)	not null,
 	primary key(NIF),
 	foreign key (NIF) references Cliente (NIF)
);

create table Veiculo(
	matricula		  integer		not null,
	nome_condutor 	  varchar(30)	not null,
	telefone_condutor integer,
	NIF				  integer		not null,
	n_alarmes		  integer,	  --not null 	
	primary key (matricula),
	foreign key(NIF) references Cliente(NIF)
);

create table Zona_Verde(
	matricula	integer	not null,
	raio		integer	not null,
	coordenadas_GPS		integer not null,
	primary key (matricula),
	foreign key (matricula) references Veiculo(matricula)
);

create table GPS(
	id 				integer	  not null,
	coordenadas		integer   not null,
	marca_temporal 	timestamp not null,
	matricula		integer	  not null,
	primary key (id),
	foreign key (matricula) references Veiculo(matricula)
);
